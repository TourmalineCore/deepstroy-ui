import{objectWithoutProperties as t,objectSpread2 as e,extends as o}from"../../_virtual/_rollupPluginBabelHelpers.js";import i,{useEffect as r}from"react";import{matchSorter as n}from"match-sorter";import{useTable as a,useResizeColumns as l,useFlexLayout as s,useFilters as u,useGlobalFilter as m,useSortBy as d,usePagination as f}from"react-table";import c from"../DesktopTable/DesktopTable.js";import p from"../MobileTable/MobileTable.js";import g from"../Filters/DefaultColumnFilter.js";import{useWindowDimensions as b}from"../../hooks/useWindowDimensions.js";import{getDefaultTablePageSize as S}from"../DesktopTable/components/DesktopPagination/paginationUtils.js";import v,{ACTIONS_COLUMN_ID as h}from"../Actions/actionsColumnFactory.js";import{getDefaultSortBy as T,getDefaultFilters as j,saveFilters as y,saveSortBy as F}from"../../utils/tableStateService.js";import{i18n as C}from"../../i18n/i18n.js";var k={Filter:g,minWidth:80,width:150,maxWidth:400},w={fuzzyText:x,text:function(t,e,o){return t.filter((function(t){var i=t.values[e];return void 0===i||String(i).toLowerCase().startsWith(String(o).toLowerCase())}))}};function M(n){var g=n.tableId,M=n.columns,x=n.data,P=n.order,B=void 0===P?{}:P,D=n.language,W=void 0===D?"en":D,z=n.renderMobileTitle,I=n.maxStillMobileBreakpoint,R=void 0===I?800:I,E=n.loading,q=n.isStriped,L=n.actions,_=void 0===L?[]:L,A=n.onFiltersChange,H=void 0===A?function(){}:A,U=n.enableTableStatePersistance,G=void 0!==U&&U,J=t(n,["tableId","columns","data","order","language","renderMobileTitle","maxStillMobileBreakpoint","loading","isStriped","actions","onFiltersChange","enableTableStatePersistance"]);if(!g)throw new Error("non-empty and globally unique tableId is required");_.length>0&&(M.find((function(t){return t.id===h}))||M.push(v(_,C(W))));var K=a(e({columns:M,data:x,defaultColumn:k,filterTypes:w,autoResetFilters:!1,autoResetSortBy:!1,initialState:{pageSize:S(g),sortBy:T(g,[B]),filters:j(g,[])},disableMultiSort:!0,disableSortRemove:!0},J),l,s,u,m,d,f),N=K.setPageSize,O=K.gotoPage,Q=K.rows,V=K.state,X=V.filters,Y=V.sortBy,Z=b().width>R;r((function(){N(Z?S(g):10),O(0)}),[Z]),r((function(){H(X)}),[X]),G&&(r((function(){y(g,X)}),[X]),r((function(){F(g,Y)}),[Y]));var $=M.every((function(t){return!t.Footer}));return Z?i.createElement(c,o({},K,{tableId:g,languageStrings:C(W),noFooter:$,totalCount:Q.length,loading:E,isStriped:q})):i.createElement(p,o({},K,{renderMobileTitle:z,languageStrings:C(W),noFooter:$,totalCount:Q.length,loading:E,actions:_}))}function x(t,e,o){return n(t,o,{keys:[function(t){return t.values[e]}]})}x.autoRemove=function(t){return!t};export default M;
